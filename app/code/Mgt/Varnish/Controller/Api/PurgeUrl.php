<?php
 namespace Mgt\Varnish\Controller\Api; class PurgeUrl extends \Magento\Framework\App\Action\Action { protected $cachePurger; protected $config; public function __construct(\Magento\Framework\App\Action\Context $context, \Magento\CacheInvalidate\Model\PurgeCache $cachePurger, \Mgt\Varnish\Model\Cache\Config $config) { goto fa2d2; A2e6c: $this->config = $config; goto f9fa2; fa2d2: $this->cachePurger = $cachePurger; goto A2e6c; f9fa2: parent::__construct($context); goto Ba4a6; Ba4a6: } public function execute() { goto Bff31; cc75c: try { goto Fa4e9; E2b6c: $this->cachePurger->purgeUrlRequest($url); goto ef58b; e9043: if (!($secretKey != $apiSecretKey)) { goto De3ac; } goto F4511; F4511: throw new \Exception("\123\145\143\x72\145\164\40\141\x70\x69\40\153\x65\x79\40\151\x73\x20\x6e\x6f\164\x20\x63\157\x72\x72\145\143\164"); goto c55ee; ef58b: $body = ["\163\x75\x63\143\x65\x73\163" => 1, "\x6d\x65\x73\163\141\x67\x65" => sprintf("\124\150\x65\x20\x55\x52\114\x20\42\45\163\x22\40\150\x61\x73\40\x62\145\145\x6e\40\x70\x75\x72\x67\145\x64\x2e", $url)]; goto a1567; c55ee: De3ac: goto E2b6c; Fa4e9: $apiSecretKey = $this->config->getApiSecretKey(); goto e9043; a1567: } catch (\Exception $e) { $errorMessage = $e->getMessage(); $body = ["\x73\165\143\x63\x65\163\163" => 0, "\155\145\163\x73\x61\x67\145" => $errorMessage]; } goto f9651; F1648: $body = json_encode($body); goto e6b10; e3532: $body = []; goto F6b2e; B8edf: $response->sendResponse(); goto caa0a; Ccb1e: $response->setBody($body); goto B8edf; F6b2e: $secretKey = $request->getParam("\x73\x65\x63\162\145\x74\113\145\x79"); goto e166b; caa0a: exit; goto e97da; e6b10: $response->setHeader("\x43\157\156\164\x65\156\x74\x2d\x54\x79\x70\x65", "\x61\160\160\154\x69\x63\141\x74\151\157\x6e\x2f\152\163\157\x6e"); goto Ccb1e; f9651: A793c: goto F1648; B680b: if (!($secretKey && $url)) { goto A793c; } goto cc75c; da765: $response = $this->getResponse(); goto e3532; e166b: $url = $request->getParam("\x75\x72\x6c"); goto B680b; Bff31: $request = $this->getRequest(); goto da765; e97da: } }
